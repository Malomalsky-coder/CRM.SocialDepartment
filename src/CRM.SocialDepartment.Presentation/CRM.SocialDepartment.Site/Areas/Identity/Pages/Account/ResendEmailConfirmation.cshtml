@page
@model ResendEmailConfirmationModel
@{
    ViewData["Title"] = "Повторная отправка подтверждения";
    Layout = "_LayoutWithoutContainer";
}

<div class="auth-card">
    <div class="text-center mb-4">
        <i class="fa fa-envelope-o fa-3x text-info mb-3"></i>
        <h1 class="h3 mb-2">Повторное подтверждение</h1>
        <p class="text-muted">Отправить письмо с подтверждением повторно</p>
    </div>

    <form method="post">
        <div asp-validation-summary="ModelOnly" class="text-danger mb-3" role="alert"></div>
        
        <div class="mb-3">
            <div class="input-group">
                <span class="input-group-text">
                    <i class="fa fa-envelope text-primary"></i>
                </span>
                <input asp-for="Input.Email" class="form-control" autocomplete="username" aria-required="true" placeholder="Введите вашу электронную почту" />
            </div>
            <span asp-validation-for="Input.Email" class="invalid-feedback d-block"></span>
            <small class="text-muted">
                <i class="fa fa-info-circle me-1"></i>
                Мы отправим новое письмо с подтверждением на этот адрес
            </small>
        </div>
        
        <div class="d-grid mb-3">
            <button id="resendSubmit" type="submit" class="btn btn-primary btn-lg">
                <i class="fa fa-paper-plane me-2"></i>Отправить подтверждение
            </button>
        </div>
        
        <div class="row">
            <div class="col">
                <a class="text-decoration-none" asp-page="./Login">
                    <i class="fa fa-arrow-left me-1"></i>Вернуться к входу
                </a>
            </div>
            <div class="col text-end">
                <a class="text-decoration-none" asp-page="./Register">
                    <i class="fa fa-user-plus me-1"></i>Регистрация
                </a>
            </div>
        </div>
    </form>
</div>

@section Scripts {
    <partial name="_ValidationScriptsPartial" />
    <script>
        // Добавляем плавную анимацию появления
        document.addEventListener('DOMContentLoaded', function() {
            const authCard = document.querySelector('.auth-card');
            authCard.style.opacity = '0';
            authCard.style.transform = 'translateY(30px)';
            
            setTimeout(() => {
                authCard.style.transition = 'all 0.6s ease-out';
                authCard.style.opacity = '1';
                authCard.style.transform = 'translateY(0)';
            }, 100);
        });

        // Фокус на поле email при загрузке
        document.querySelector('input[name="Input.Email"]').focus();
        
        // Анимация кнопки при отправке
        document.getElementById('resendSubmit').addEventListener('click', function() {
            const btn = this;
            const icon = btn.querySelector('i');
            
            // Показываем спиннер
            icon.classList.remove('fa-paper-plane');
            icon.classList.add('fa-spinner', 'fa-spin');
            btn.disabled = true;
            
            // Возвращаем обратно через 3 секунды (если форма не отправилась)
            setTimeout(() => {
                icon.classList.remove('fa-spinner', 'fa-spin');
                icon.classList.add('fa-paper-plane');
                btn.disabled = false;
            }, 3000);
        });
    </script>
}
