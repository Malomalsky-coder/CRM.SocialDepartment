@page
@model RegisterConfirmationModel
@{
    ViewData["Title"] = "Подтверждение регистрации";
    Layout = "_LayoutWithoutContainer";
}

<div class="auth-card">
    <div class="text-center mb-4">
        <div class="mb-3">
            <i class="fa fa-user-plus fa-3x text-success"></i>
        </div>
        <h1 class="h3 mb-2">Регистрация завершена!</h1>
        <p class="text-muted">Проверьте свою электронную почту для активации аккаунта</p>
    </div>

    <div class="alert alert-info border-0 mb-4" style="background: rgba(37, 99, 235, 0.1);">
        <div class="d-flex align-items-start">
            <i class="fa fa-envelope text-primary me-3 mt-1"></i>
            <div>
                <strong>Что дальше?</strong>
                <p class="mb-1">Мы отправили письмо с подтверждением на вашу электронную почту.</p>
                <small class="text-muted">
                    <i class="fa fa-clock-o me-1"></i>
                    Обычно письмо приходит в течение 2-3 минут. Проверьте папку "Спам", если письмо не пришло.
                </small>
            </div>
        </div>
    </div>

    @if (Model.DisplayConfirmAccountLink)
    {
        <div class="alert alert-warning border-0 mb-4">
            <div class="d-flex align-items-start">
                <i class="fa fa-cog text-warning me-3 mt-1"></i>
                <div>
                    <strong>Режим разработки</strong>
                    <p class="mb-2">Email сервер не настроен. Используйте прямую ссылку для подтверждения:</p>
                    <a id="confirm-link" href="@Model.EmailConfirmationUrl" class="btn btn-sm btn-warning">
                        <i class="fa fa-check me-1"></i>Подтвердить аккаунт сейчас
                    </a>
                </div>
            </div>
        </div>
    }

    <div class="d-grid gap-2 mb-3">
        @if (!Model.DisplayConfirmAccountLink)
        {
            <a asp-page="./ResendEmailConfirmation" class="btn btn-outline-primary">
                <i class="fa fa-paper-plane me-2"></i>Отправить письмо повторно
            </a>
        }
        <a asp-page="./Login" class="btn btn-primary">
            <i class="fa fa-sign-in me-2"></i>Перейти к входу
        </a>
    </div>
    
    <div class="text-center">
        <small class="text-muted">
            <i class="fa fa-info-circle me-1"></i>
            После подтверждения email вы сможете войти в систему
        </small>
    </div>
</div>

<script>
    // Добавляем плавную анимацию появления
    document.addEventListener('DOMContentLoaded', function() {
        const authCard = document.querySelector('.auth-card');
        authCard.style.opacity = '0';
        authCard.style.transform = 'translateY(30px)';
        
        setTimeout(() => {
            authCard.style.transition = 'all 0.6s ease-out';
            authCard.style.opacity = '1';
            authCard.style.transform = 'translateY(0)';
        }, 100);
        
        // Анимация иконки регистрации
        const userIcon = document.querySelector('.fa-user-plus');
        if (userIcon) {
            setTimeout(() => {
                userIcon.style.transform = 'rotate(360deg)';
                userIcon.style.transition = 'transform 0.6s ease';
            }, 1000);
        }
    });

    // Улучшенная обработка ссылки подтверждения в режиме разработки
    const confirmLink = document.getElementById('confirm-link');
    if (confirmLink) {
        confirmLink.addEventListener('click', function() {
            const icon = this.querySelector('i');
            icon.classList.remove('fa-check');
            icon.classList.add('fa-spinner', 'fa-spin');
            this.innerHTML = '<i class="fa fa-spinner fa-spin me-1"></i>Подтверждение...';
        });
    }
</script>

