@page
@model ResetPasswordConfirmationModel
@{
    ViewData["Title"] = "Пароль изменен";
    Layout = "_LayoutWithoutContainer";
}

<div class="auth-card">
    <div class="text-center mb-4">
        <div class="mb-3">
            <i class="fa fa-check-circle fa-3x text-success"></i>
        </div>
        <h1 class="h3 mb-2">Пароль успешно изменен!</h1>
        <p class="text-muted">Ваш новый пароль установлен и готов к использованию</p>
    </div>

    <div class="alert alert-success border-0 mb-4" style="background: rgba(5, 150, 105, 0.1);">
        <div class="d-flex align-items-start">
            <i class="fa fa-shield text-success me-3 mt-1"></i>
            <div>
                <strong>Безопасность обеспечена</strong>
                <p class="mb-1">Ваш аккаунт теперь защищен новым паролем.</p>
                <small class="text-muted">
                    <i class="fa fa-lightbulb-o me-1"></i>
                    Рекомендуем использовать уникальные пароли для всех сервисов.
                </small>
            </div>
        </div>
    </div>

    <div class="d-grid mb-3">
        <a asp-page="./Login" class="btn btn-primary btn-lg">
            <i class="fa fa-sign-in me-2"></i>Войти в систему
        </a>
    </div>
    
    <div class="text-center">
        <small class="text-muted">
            <i class="fa fa-info-circle me-1"></i>
            Автоматический переход через <span id="countdown">5</span> сек.
        </small>
    </div>
</div>

<script>
    // Добавляем плавную анимацию появления
    document.addEventListener('DOMContentLoaded', function() {
        const authCard = document.querySelector('.auth-card');
        authCard.style.opacity = '0';
        authCard.style.transform = 'translateY(30px)';
        
        setTimeout(() => {
            authCard.style.transition = 'all 0.6s ease-out';
            authCard.style.opacity = '1';
            authCard.style.transform = 'translateY(0)';
        }, 100);
        
        // Анимация иконки успеха
        const successIcon = document.querySelector('.fa-check-circle');
        setTimeout(() => {
            successIcon.style.transform = 'scale(1.1)';
            setTimeout(() => {
                successIcon.style.transform = 'scale(1)';
            }, 200);
        }, 1000);
    });

    // Автоматическое перенаправление через 5 секунд
    let timeLeft = 5;
    const countdownElement = document.getElementById('countdown');
    const loginBtn = document.querySelector('a[asp-page="./Login"]');
    
    const timer = setInterval(() => {
        timeLeft--;
        countdownElement.textContent = timeLeft;
        
        if (timeLeft <= 0) {
            clearInterval(timer);
            loginBtn.style.background = 'linear-gradient(45deg, #3b82f6, #1d4ed8)';
            loginBtn.innerHTML = '<i class="fa fa-spinner fa-spin me-2"></i>Перенаправление...';
            setTimeout(() => {
                window.location.href = loginBtn.href;
            }, 1000);
        }
    }, 1000);
</script>
